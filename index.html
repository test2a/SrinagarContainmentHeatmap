<div id="map"></div>

<script type="text/javascript" src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/heatmap.js/2.0.2/heatmap.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/leaflet-heatmap@1.0.0/leaflet-heatmap.js"></script>
<script type="text/javascript">

axios.get('https://api.github.com/gists/a210c98011416e11a90a4adf00973c2e')
  .then(response => {
  
  	let sales = JSON.parse(response.data.files['federal_hill_sales.json'].content)
    
    // Create the base Leaflet layer (the map itself)
    let baseLayer = L.tileLayer(
      'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a>'
      }
    )

    // Configure and create the heatmap.js layer
    let cfg = {
      "radius": 40,
      "useLocalExtrema": true,
      valueField: 'price'
    }

    let heatmapLayer = new HeatmapOverlay(cfg)

    // Determine min/max (from sales.js file) for the heatmap.js plugin
    let min = Math.min(...sales.map(sale => sale.value))
    let max = Math.max(...sales.map(sale => sale.value))

    // Create the overall Leaflet map using the two layers we created
    let propertyHeatMap = new L.Map('map', {
      center: new L.LatLng(39.275, -76.613),
      zoom: 15,
      layers: [baseLayer, heatmapLayer]
    })

    // Add data (from sales.js file) to the heatmap.js layer
    heatmapLayer.setData({
      min: min,
      max: max,
      data: sales
    });
  
  
  })
    .catch(error => {
    console.log(error)
  })
</script>


<style>
#map
{
  width: 500px;
  height: 400px;
  border: solid 10px white;
}
</style>
